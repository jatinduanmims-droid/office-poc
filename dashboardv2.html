<div class="dashboard">

  <!-- KPI HEADER -->
  <div class="kpi-header">
    <div class="kpi"> {{ animatedKPIs.total }} <span>Total Controls</span></div>
    <div class="kpi success"> {{ animatedKPIs.success }} <span>Successful</span></div>
    <div class="kpi error"> {{ animatedKPIs.failure }} <span>Unsuccessful</span></div>
    <div class="kpi success"> {{ animatedKPIs.slaMet }}% <span>SLA Met</span></div>
    <div class="kpi error"> {{ animatedKPIs.slaBreach }}% <span>SLA Breach</span></div>
  </div>

  <!-- PERFORMANCE + FAILED -->
  <div class="grid">

    <div class="card">
      <h3>‚≠ê Controls Performance</h3>

      <div
        class="domain"
        *ngFor="let d of domains"
        [class.active]="isSelected(d)"
        (click)="selectDomain(d)"
      >
        <div class="label">{{ d.name }}</div>

        <div class="bar">
          <div
            class="success-bar"
            [style.width.%]="successPercent(d)"
          ></div>
          <div
            class="fail-bar"
            [style.width.%]="failurePercent(d)"
          ></div>
        </div>

        <div class="count">{{ d.success }} / {{ d.failure }}</div>
      </div>
    </div>

    <div class="card">
      <h3>‚ö† Failed Controls (Today)</h3>
      <ul>
        <li *ngFor="let f of failedControlsToday">‚ö† {{ f }}</li>
      </ul>
    </div>

  </div>

  <!-- SLA TREND -->
  <div class="card sla-card">
    <h3>üìà SLA Trend</h3>
    <canvas
      baseChart
      [data]="lineChartData"
      [options]="lineChartOptions"
      chartType="line">
    </canvas>
  </div>

</div>