<div class="dashboard-container">

  <!-- KPI STRIP -->
  <div class="kpi-strip">
    <div class="kpi-card" (click)="updateKPIs('all')">
      <div class="kpi-value">{{ totalControls }}</div>
      <div class="kpi-label">Total Controls</div>
    </div>

    <div class="kpi-card success">
      <div class="kpi-value">{{ totalSuccess }}</div>
      <div class="kpi-label">Successful</div>
    </div>

    <div class="kpi-card danger">
      <div class="kpi-value">{{ totalFailure }}</div>
      <div class="kpi-label">Unsuccessful</div>
    </div>

    <div class="kpi-card success">
      <div class="kpi-value">{{ slaMet }}%</div>
      <div class="kpi-label">SLA Met</div>
    </div>

    <div class="kpi-card danger">
      <div class="kpi-value">{{ slaBreach }}%</div>
      <div class="kpi-label">SLA Breach</div>
    </div>
  </div>

  <!-- MIDDLE -->
  <div class="middle-row">

    <div class="card">
      <div class="card-header">‚≠ê Controls Performance</div>

      <div class="control-row clickable" (click)="updateKPIs('trade')">
        <span>Trade Controls</span>
        <div class="bar">
          <span class="success-bar" [style.width.%]="tradeSuccessPercent"></span>
          <span class="fail-bar" [style.width.%]="tradeFailurePercent"></span>
        </div>
        <span>{{ trade.success }} / {{ trade.failure }}</span>
      </div>

      <div class="control-row clickable" (click)="updateKPIs('loan')">
        <span>Loan Controls</span>
        <div class="bar">
          <span class="success-bar" [style.width.%]="loanSuccessPercent"></span>
          <span class="fail-bar" [style.width.%]="loanFailurePercent"></span>
        </div>
        <span>{{ loan.success }} / {{ loan.failure }}</span>
      </div>

      <div class="control-row clickable" (click)="updateKPIs('supply')">
        <span>Supply Chain Controls</span>
        <div class="bar">
          <span class="success-bar" [style.width.%]="supplySuccessPercent"></span>
          <span class="fail-bar" [style.width.%]="supplyFailurePercent"></span>
        </div>
        <span>{{ supply.success }} / {{ supply.failure }}</span>
      </div>
    </div>

    <div class="card failed-card">
      <div class="card-header">
        ‚ö† Failed Controls (Today)
        <span class="badge">{{ failedControls.length }}</span>
      </div>

      <ul>
        <li *ngFor="let f of failedControls">{{ f }}</li>
      </ul>
    </div>
  </div>

  <!-- SLA -->
  <div class="card sla-card">
    <div class="card-header">
      üìä SLA Trend ‚Äì Incoming Requests Management (B_GBWW_TT-046)
    </div>

    <div class="sla-chart">
      <canvas
        baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="'line'">
      </canvas>
    </div>
  </div>

</div>