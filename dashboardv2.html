<div class="dashboard-container">

  <!-- KPI HEADER -->
  <div class="kpi-header">
    <div class="kpi-card">
      <div class="kpi-value">{{ animatedKPIs.total }}</div>
      <div class="kpi-label">Total Controls</div>
    </div>

    <div class="kpi-card success">
      <div class="kpi-value">{{ animatedKPIs.success }}</div>
      <div class="kpi-label">Successful</div>
    </div>

    <div class="kpi-card error">
      <div class="kpi-value">{{ animatedKPIs.failure }}</div>
      <div class="kpi-label">Unsuccessful</div>
    </div>

    <div class="kpi-card success">
      <div class="kpi-value">{{ animatedKPIs.slaMet }}%</div>
      <div class="kpi-label">SLA Met</div>
    </div>

    <div class="kpi-card error">
      <div class="kpi-value">{{ animatedKPIs.slaBreach }}%</div>
      <div class="kpi-label">SLA Breach</div>
    </div>
  </div>

  <!-- PERFORMANCE + FAILED -->
  <div class="top-grid">

    <!-- CONTROLS PERFORMANCE -->
    <div class="card performance-card">
      <h3>‚≠ê Controls Performance</h3>

      <div
        class="performance-row"
        *ngFor="let d of domains"
        [class.active]="isSelected(d)"
        (click)="selectDomain(d)"
      >
        <div class="label">{{ d.name }}</div>

        <div class="progress-track">
          <div
            class="progress success"
            [style.width.%]="successPercent(d)"
          ></div>
          <div
            class="progress failure"
            [style.width.%]="failurePercent(d)"
          ></div>
        </div>

        <div class="numbers">
          {{ d.success }} / {{ d.failure }}
        </div>
      </div>
    </div>

    <!-- FAILED CONTROLS -->
    <div class="card failed-card">
      <h3>‚ö† Failed Controls (Today)</h3>

      <ul>
        <li *ngFor="let f of failedControlsToday">
          <span class="warn">‚ö†</span>
          {{ f }}
        </li>
      </ul>
    </div>

  </div>

  <!-- SLA TREND -->
  <div class="card sla-card">
    <h3>üìà SLA Trend</h3>

    <div class="sla-chart-wrapper">
      <canvas
        baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        chartType="line">
      </canvas>
    </div>
  </div>

</div>