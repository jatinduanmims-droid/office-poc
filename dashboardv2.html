<div class="dashboard-v2">

  <!-- KPI STRIP -->
  <section class="kpi-strip">
    <div class="kpi-card">
      <div class="kpi-value">120</div>
      <div class="kpi-label">Total Controls</div>
    </div>
    <div class="kpi-card success">
      <div class="kpi-value">107</div>
      <div class="kpi-label">Successful</div>
    </div>
    <div class="kpi-card danger">
      <div class="kpi-value">24</div>
      <div class="kpi-label">Unsuccessful</div>
    </div>
    <div class="kpi-card success">
      <div class="kpi-value">82%</div>
      <div class="kpi-label">SLA Met</div>
    </div>
    <div class="kpi-card danger">
      <div class="kpi-value">18%</div>
      <div class="kpi-label">SLA Breach</div>
    </div>
  </section>

  <!-- PERFORMANCE + FAILED -->
  <section class="grid-2">

    <div class="card">
      <h3 class="card-title">Controls Performance</h3>

      <div class="perf-row">
        <span>Trade Controls</span>
        <div class="bar-track">
          <div class="bar-fill success" style="width: 82%"></div>
        </div>
      </div>

      <div class="perf-row">
        <span>Loan Controls</span>
        <div class="bar-track">
          <div class="bar-fill success" style="width: 85%"></div>
        </div>
      </div>

      <div class="perf-row">
        <span>Supply Chain Controls</span>
        <div class="bar-track">
          <div class="bar-fill success" style="width: 78%"></div>
        </div>
      </div>
    </div>

    <div class="card failed-card">
      <h3 class="card-title">Failed Controls (Today)</h3>
      <ul class="failed-list">
        <li *ngFor="let fc of failedControlsToday">{{ fc }}</li>
      </ul>
    </div>

  </section>

  <!-- SLA TREND -->
  <section class="card sla-card">

    <div class="sla-header">
      <h3>SLA Trend</h3>

      <mat-form-field appearance="outline" class="sla-select">
        <input matInput
               placeholder="Select control"
               [formControl]="searchControl"
               [matAutocomplete]="auto">
      </mat-form-field>

      <mat-autocomplete #auto="matAutocomplete"
                        (optionSelected)="onSelectControl($event.option.value)">
        <mat-option *ngFor="let c of filteredControls$ | async" [value]="c">
          {{ c.name }}
        </mat-option>
      </mat-autocomplete>
    </div>

    <div class="sla-chart">
      <canvas baseChart
              [data]="lineChartData"
              [options]="lineChartOptions"
              type="line">
      </canvas>
    </div>

  </section>

</div>