You are working on an Angular standalone component called AllcontrolsComponent
used in the C4 CONTROLS AGENT dashboard.

GOAL:
Move the “Search Controls” input above the SLA line chart and REMOVE the controls
table below the search box. The search must work via autocomplete and directly
control the chart selection.

STRICT RULES:
- Do NOT redesign the UI
- Do NOT change chart logic, datasets, or calculations
- Do NOT introduce APIs (data is static)
- Do NOT remove existing chart generation functions
- Use Angular Material best practices
- Make minimal, clean changes only

========================
STEP 1: REMOVE CONTROLS TABLE
========================
In the HTML template:
- Completely remove the <mat-table> that shows the “Controls List”
- Remove table column definitions and row click handlers
- Do NOT remove the selectedControl logic (it is still required)

========================
STEP 2: MOVE SEARCH ABOVE LINE CHART
========================
In the HTML template:
- Place the search input directly above the SLA line chart
- The search must appear in the chart header area
- Layout should be:
    [ Chart Title (left) ] [ Search Controls input (right) ]
    [ Line Chart below ]

========================
STEP 3: CONVERT SEARCH TO AUTOCOMPLETE
========================
Replace the existing ngModel-based input with:
- FormControl-based input
- Angular Material mat-autocomplete
- Suggestions sourced from the static controls array
- Minimum 2 characters before suggestions appear
- Highlight matching text inside suggestions
- Show “No matching controls” when no results exist

Autocomplete behavior:
- Typing filters controls in real time
- Selecting a suggestion calls onSelectControl(control)
- Selecting updates the chart immediately

========================
STEP 4: TYPESCRIPT REQUIREMENTS
========================
- Add FormControl named searchControl
- Add Observable<ControlRow[]> filteredControls$
- Use debounceTime(250) and distinctUntilChanged()
- Filtering must be case-insensitive
- Keep existing onSelectControl(ctrl) logic intact
- Do NOT remove generateRandomTickPercentage or chart rebuild logic

========================
STEP 5: DISPLAY FUNCTION
========================
- Ensure selected control name is displayed in the input
- Prevent “[object Object]” from appearing

========================
STEP 6: CSS (MINIMAL)
========================
Add only what is required:
- Flex layout for chart header
- Search input width ~300–320px
- No color/theme changes

========================
FINAL OUTPUT EXPECTATION
========================
Return:
1) Updated HTML template (only changed sections)
2) Updated TypeScript code (only added/modified parts)
3) Any required CSS additions

Do NOT explain concepts.
Do NOT add optional features.
Make the changes production-safe and aligned with 
enterprise dashboard UX.


step2
You are working on an Angular standalone component called AllcontrolsComponent
used in the C4 CONTROLS AGENT dashboard.

GOAL:
1) Move the “Search Controls” input OUTSIDE and ABOVE the chart container
   so it appears as a separate row above the chart box (same width, right-aligned).
2) Limit autocomplete suggestions so the dropdown never shows the full controls list.

STRICT RULES:
- Do NOT redesign the UI or change colors/themes
- Do NOT use absolute positioning
- Do NOT modify chart logic, datasets, or calculations
- Do NOT introduce APIs (data is static)
- Make minimal, production-safe changes only
- Use Angular Material best practices

================================================
PART 1: SEARCH BAR POSITIONING
================================================
- Remove the search input from inside the chart panel.
- Create a separate wrapper ABOVE the chart container.
- The search bar must:
  - Be visually outside the chart box
  - Be aligned to the right
  - Have the same width as before (~300–320px)
  - Have a small vertical gap (~12px) from the chart box
- The chart container itself must remain visually unchanged.

================================================
PART 2: AUTOCOMPLETE BEHAVIOR (LIMIT RESULTS)
================================================
Autocomplete rules:
1. When the input is empty or has less than 2 characters:
   - Show ONLY the last 3 recently selected controls.
2. When the user types 2 or more characters:
   - Show ONLY the top 2 matching controls.
3. Never show more than 5 options total.
4. Never show the full controls list.
5. Matching must be case-insensitive.
6. Show “No matching controls” when no results exist.

================================================
PART 3: RECENT SEARCHES
================================================
- Maintain a recentControls array (max size = 3).
- Update recentControls every time a control is selected.
- Ensure recentControls:
  - Has no duplicates
  - Is ordered by most recent first

================================================
PART 4: TYPESCRIPT REQUIREMENTS
================================================
- Use FormControl-based search (searchControl).
- Use Observable<ControlRow[]> filteredControls$.
- Use debounceTime(250) and distinctUntilChanged().
- Keep existing onSelectControl(), selectControl(),
  and chart rebuild logic intact.
- Ensure selected control name displays correctly in input
  (prevent “[object Object]”).

================================================
PART 5: HTML REQUIREMENTS
================================================
- Use Angular Material mat-autocomplete.
- Autocomplete must call onSelectControl(control).
- Display a disabled “Recent Searches” label when showing recent items.
- Display a disabled “No matching controls” message when applicable.

================================================
PART 6: CSS (MINIMAL ONLY)
================================================
- Add only what is required for layout:
  - Flex alignment for search wrapper
  - Fixed width for search input
  - Vertical spacing above chart
- No theme or color changes.

================================================
FINAL OUTPUT EXPECTATION
================================================
Return:
1) Updated HTML (only modified sections)
2) Updated TypeScript (only added/changed parts)
3) Any required CSS additions

Do NOT explain concepts.
Do NOT add optional features.
Do NOT refactor unrelated code.




step3
You are modifying the HTML template of an Angular component
in the C4 CONTROLS AGENT dashboard.

GOAL:
Move the “Search Controls” input so that it appears ABOVE
the chart box, not inside or beside it.

INSTRUCTIONS:
1. Remove the search <mat-form-field> from inside the chart container.
2. Create a new wrapper div ABOVE the chart container.
3. Place the search input inside this new wrapper.
4. Keep the chart container unchanged.
5. Do NOT change TypeScript or CSS.
6. Do NOT redesign UI or layout styles.

EXPECTED STRUCTURE:
[ Search Controls ]
[ Chart Box ]

RETURN:
- Updated HTML only
- No explanations


